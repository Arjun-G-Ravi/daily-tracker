{% extends "base.html" %}

{% block content %}
<div class="month-header">
    {{ month_name }} {{ year }}
</div>

<div class="calendar-container">
    <table class="calendar-table">
        <thead>
            <tr>
                <th class="journey-name">Journey</th>
                {% for day in days %}
                <th>{{ day }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for journey in all_journeys %}
            <tr>
                <td class="journey-name">{{ journey }}</td>
                {% for day in days %}
                {% set date_key = "{}-{:02d}-{:02d}".format(year, month, day) %}
                <td>
                    <div class="day-cell {% if journeys.get(date_key, {}).get(journey) %}completed{% endif %}"
                         title="{{ journey }} - {{ day }}/{{ month }}"
                         data-journey="{{ journey }}"
                         data-day="{{ day }}"
                         data-month="{{ month }}"
                         data-year="{{ year }}">
                    </div>
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
            
            {% if not all_journeys %}
            <tr>
                <td colspan="{{ days|length + 1 }}" style="text-align: center; padding: 40px; color: #8b949e;">
                    No journeys yet. <a href="{{ url_for('journey') }}" style="color: #58a6ff;">Add your first journey</a>
                </td>
            </tr>
            {% endif %}
        </tbody>
    </table>
</div>
{% endblock %}
